<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="/templates/template.xhtml">
	<ui:define name="content">
		<h:form>
			<h:commandButton  	rendered="#{not adminBean.getNewUserC().newUserFormVisible}"
								value="create new user" 
								action="#{adminBean.getNewUserC().showNewUserForm()}"></h:commandButton>
			<h:panelGroup rendered="#{adminBean.getNewUserC().newUserFormVisible}">
			<table>
				<tr>
					<td>
						<h:outputText value="Name"></h:outputText>
					</td>
					<td>
						<h:outputText value="Password"></h:outputText>
					</td>
					<td>
						<h:outputText value="Role"></h:outputText>
					</td>
				</tr>
				<tr>
					<td>
						<h:inputText value="#{adminBean.getNewUserC().name}"></h:inputText>
					</td>
					<td>
						<h:inputText value="#{adminBean.getNewUserC().password}"></h:inputText>
					</td>
					<td>
						<h:selectOneMenu value="#{adminBean.getNewUserC().role}">
   								<f:selectItem itemValue="admin"/>
   								<f:selectItem itemValue="user" />   								
   						</h:selectOneMenu>
					</td>
					<td>
						<h:commandButton value="create" action="#{adminBean.getNewUserC().createButton()}"></h:commandButton>
						<h:commandButton value="cancel" action="#{adminBean.getNewUserC().cancelButton()}"></h:commandButton>
					</td>
				</tr>
			</table>
			</h:panelGroup>			
		</h:form>
		<hr></hr>
		<h:form>
			<table>
				<tr>
					<td>
						<h:outputText value="Name"></h:outputText>
					</td>
					<td>
						<h:outputText value="Password"></h:outputText>
					</td>
					<td>
						<h:outputText value="Role"></h:outputText>
					</td>
				</tr>
				<ui:repeat var="userBeanComponent" value="#{adminBean.usersC}">
				<tr>
					<td>
						<h:outputText value="#{userBeanComponent.name}"  rendered="#{not userBeanComponent.beingEdited}"></h:outputText>
						<h:inputText value="#{userBeanComponent.name}" rendered="#{userBeanComponent.beingEdited}"></h:inputText>
					</td>
					<td>
						<h:outputText value="#{userBeanComponent.password}"  rendered="#{not userBeanComponent.beingEdited}"></h:outputText>
						<h:inputText value="#{userBeanComponent.password}" rendered="#{userBeanComponent.beingEdited}"></h:inputText>
					</td>
					<td>
						<h:outputText value="#{userBeanComponent.role}"  rendered="#{not userBeanComponent.beingEdited}"></h:outputText>
						<h:panelGroup>
							<h:selectOneMenu value="#{userBeanComponent.role}" rendered="#{userBeanComponent.beingEdited}">
   								<f:selectItem itemValue="admin"/>
   								<f:selectItem itemValue="user" />   								
   							</h:selectOneMenu>
						</h:panelGroup>
					</td>
					<td>
						<h:commandButton 	value="edit" 
											action="#{userBeanComponent.editButton()}"
											rendered="#{not userBeanComponent.beingEdited}"></h:commandButton>
					
					
						<h:commandButton 	value="save" 
											action="#{userBeanComponent.saveButton()}"
											rendered="#{userBeanComponent.beingEdited}"></h:commandButton>
						<h:commandButton 	value="cancel" 
											action="#{userBeanComponent.cancelButton()}"
											rendered="#{userBeanComponent.beingEdited}"></h:commandButton>
					</td>
					<td>
						<h:commandButton value="delete" action="#{userBeanComponent.deleteButton()}"></h:commandButton>
					</td>
				</tr>
				</ui:repeat>
			</table>
		</h:form>
		<hr></hr>	
	</ui:define>
</ui:composition>
</html>